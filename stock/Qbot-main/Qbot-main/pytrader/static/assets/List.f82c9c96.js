import{_ as A,j as D,k as B,l as S}from"./index.667ceb38.js";import{k as x,b as V,r as h,y as n,z as j,F as N,C as e,B as a,H as u,I as $,P as d,S as r,R as I,j as b,a1 as T,a2 as w,N as W,O as z}from"./element-plus.5733ce57.js";let L=null;const M=x({components:{},setup(){const t=V({code:[{required:!0,message:"\u8BF7\u8F93\u5165\u80A1\u7968\u4EE3\u7801",trigger:"blur"},{min:6,max:6,message:"\u80A1\u7968\u4EE3\u7801\u4E3A6\u4F4D",trigger:"blur"}]}),s=h([]),i=h(""),c=h(!1),_=async()=>{const o=await D();s.value=o.data};return{edit:o=>console.log(o),show:c,stocks:s,newStock:i,rules:t,remove:async o=>{T.confirm(`\u786E\u8BA4\u5220\u9664\u5173\u6CE8\u80A1\u7968${o}`,"Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{(await S(o)).data.data?(w({type:"success",message:"Delete completed"}),_()):b({title:"\u63D0\u793A",message:"\u5220\u9664\u5931\u8D25"})}).catch(()=>{w({type:"info",message:"Delete canceled"})})},loadStocks:_,addWatchStock:async()=>{(await B(i.value)).data.data?(b({title:"\u63D0\u793A",message:"\u6DFB\u52A0\u6210\u529F"}),c.value=!1,i.value="",_()):b({title:"\u63D0\u793A",message:"\u6DFB\u52A0\u5931\u8D25"})},addNewStock:()=>{c.value=!0},addClass:o=>o["\u6DA8\u8DCC(%)"]>0?"cell-red":"cell-green"}},mounted(){this.loadStocks()},unmounted(){clearInterval(L)}}),m=t=>(W("data-v-30796c9f"),t=t(),z(),t),O={class:"card-header flex justify-between items-center"},R=m(()=>u("span",null,"\u6211\u7684\u5173\u6CE8",-1)),U=r(" \u5237\u65B0"),q=r(" \u6DFB\u52A0"),H={style:{display:"flex","align-items":"center"}},K={style:{display:"flex","align-items":"center"}},P={style:{"margin-left":"10px"}},G=m(()=>u("br",null,null,-1)),J=m(()=>u("br",null,null,-1)),Q=m(()=>u("br",null,null,-1)),X=r("\u5220\u9664"),Y={class:"dialog-footer"},Z=r("\u53D6\u6D88"),ee=r("\u6DFB\u52A0");function te(t,s,i,c,_,C){const f=n("el-link"),o=n("el-table-column"),p=n("el-button"),F=n("el-table"),g=n("el-card"),k=n("el-input"),E=n("el-form-item"),v=n("el-form"),y=n("el-dialog");return j(),N(I,null,[e(g,{shadow:"hover",class:"mb-2"},{header:a(()=>[u("div",O,[R,u("div",null,[e(f,{type:"primary",underline:!1,href:"javascript:;",onClick:t.loadStocks},{default:a(()=>[U]),_:1},8,["onClick"]),e(f,{type:"primary",underline:!1,href:"javascript:;",onClick:t.addNewStock},{default:a(()=>[q]),_:1},8,["onClick"])])])]),default:a(()=>[e(F,{data:t.stocks,border:"",style:{width:"100%"}},{default:a(()=>[e(o,{fixed:"",prop:"name",label:"\u540D\u79F0"}),e(o,{prop:"code",label:"\u4EE3\u7801",sortable:""}),e(o,{prop:"now",label:"\u5F53\u524D\u4EF7\u683C",sortable:""}),e(o,{label:"\u6DA8\u8DCC\u5E45",width:"180",sortable:""},{default:a(l=>[u("div",H,[u("span",{style:{"margin-left":"10px"},class:$(t.addClass(l.row))},d(l.row.now-l.row.open>0?"+":"")+d((l.row.now-l.row.open).toFixed(2))+" ("+d(l.row["\u6DA8\u8DCC(%)"])+"%)",3)])]),_:1}),e(o,{label:"\u505AT\u4EF7\u683C",width:"180"},{default:a(l=>[u("div",K,[u("span",P,[r("\u53561\uFF1A"+d(l.row.t_price[0].toFixed(2)),1),G,r("\u53562\uFF1A"+d(l.row.t_price[1].toFixed(2)),1),J,r("\u4E701\uFF1A"+d(l.row.t_price[2].toFixed(2)),1),Q,r("\u4E702\uFF1A"+d(l.row.t_price[3].toFixed(2)),1)])])]),_:1}),e(o,{prop:"\u6210\u4EA4\u91CF(\u624B)",label:"\u6210\u4EA4\u91CF\uFF08\u624B)",sortable:""}),e(o,{prop:"\u603B\u5E02\u503C",label:"\u603B\u5E02\u503C",sortable:""}),e(o,{prop:"\u5E02\u76C8(\u9759)",label:"\u5E02\u76C8(\u9759)",sortable:""}),e(o,{fixed:"right",label:""},{default:a(l=>[e(p,{type:"text",size:"small",onClick:oe=>t.remove(l.row.code)},{default:a(()=>[X]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(y,{modelValue:t.show,"onUpdate:modelValue":s[2]||(s[2]=l=>t.show=l),title:"\u65B0\u589E\u5173\u6CE8\u80A1\u7968",width:"30%","before-close":t.handleClose},{footer:a(()=>[u("span",Y,[e(p,{onClick:s[1]||(s[1]=l=>t.show=!1)},{default:a(()=>[Z]),_:1}),e(p,{type:"primary",onClick:t.addWatchStock},{default:a(()=>[ee]),_:1},8,["onClick"])])]),default:a(()=>[e(v,{ref:"ruleForm","label-position":"right","label-width":"80px",rules:t.rules},{default:a(()=>[e(E,{class:"mb-6 -ml-20",prop:"code"},{default:a(()=>[e(k,{modelValue:t.newStock,"onUpdate:modelValue":s[0]||(s[0]=l=>t.newStock=l),maxlength:"6",minlength:"6",placeholder:"\u8BF7\u8F93\u5165\u80A1\u7968\u4EE3\u7801","prefix-icon":"el-icon-user"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules"])]),_:1},8,["modelValue","before-close"])],64)}var ue=A(M,[["render",te],["__scopeId","data-v-30796c9f"]]);export{ue as default};
